<html>
    <body>

        <img class="loginBtn" src="./img/btn_login_base.png">

        <button id="vote">投票する</button>

        <script src="js/component.js"></script>
        <script>
            var query = getQueryString();

            if(query["login"]){
                alert("ログインに成功しました。");
                location.href = ".";
            }

            document.getElementById("vote").addEventListener("click", function(){
                if(window.localStorage.getItem("accessKey")){
                    var data1 = 3;
                    var data2 = 24;
                    var data3 = 56;
                    var data4 = 79;
                    var data = createVoteRequestUrl(data1, data2, data3, data4);
                    var callback = function () {

                        if (xhr.readyState === 4 && xhr.status === 200) {
                            var response = xhr.responseText;
                            if (response === "Voted") {
                                alert("投票は一人一回までとなっております。");
                            } else if (response === "Successfully Voted") {
                                alert("投票が完了しました。");
                            } else if (response === "Failed") {
                                alert("問題が発生しました。");
                            }
                        }
                    }
                    postData("https://suishosai-server-php.herokuapp.com/contest.php", data, callback);
                }else{
                    alert("you need to login before vote");
                }
            })
        </script>
    </body>
</html>