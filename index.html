<html>
    <body>

        <img class="loginBtn" src="./img/btn_login_base.png">

        <button id="vote">投票する</button>

        <script src="js/component.js"></script>
        <script>
            var query = getQueryString();

            if(query["login"]){
                alert("ログインに成功しました。");
                location.href = ".";
            }

            document.getElementById("vote").addEventListener("click", function(){
                if(window.localStorage.getItem("userid")){
                    var data1 = 3;
                    var data2 = 18;
                    var data3 = 45;
                    var data4 = 45;
                    var data = createVoteRequestUrl(data1, data2, data3, data4);
                    var callback = function (e) {
                        var status = e.target.status;
                        var readyState = e.target.readyState;
                        var response = e.target.responseText;
                        if (status === 200 && readyState === 4) {
                            if (response === "Voted") {
                                alert("投票は一人一回までとなっております。");
                            } else if (response === "Successfully Voted") {
                                alert("投票が完了しました。");
                            } else if (response === "Failed") {
                                alert("問題が発生しました。");
                            }
                        }
                    }
                    postData("https://suishosai-server-php.herokuapp.com/redirect1.php", data, callback);
                }else{
                    alert("you need to login before vote");
                }
            })
        </script>
    </body>
</html>